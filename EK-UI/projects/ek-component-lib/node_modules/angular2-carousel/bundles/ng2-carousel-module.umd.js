!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("hammerjs"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define(["exports","@angular/core","hammerjs","@angular/platform-browser"],t):t((e.ng=e.ng||{},e.ng.carouselModule=e.ng.carouselModule||{}),e.ng.core,e.Hammer,e.ng["platform-browser"])}(this,function(e,t,i,n){"use strict";var o=function(){function e(){this._currdeg=0,this._totalItems=0,this._maxWidthSize=0,this._maxHeigthSize=0,this._maxDegree=0,this._totalWidth=0,this._isHorizontal=!1,this._items=[],this._degreesSlides=[],this._activeIndex=0,this._lastIndex=-1,this._lockSlides=!1,this._autoPlayIsRunning=!1}return Object.defineProperty(e.prototype,"autoPlayIsRunning",{get:function(){return this._autoPlayIsRunning},set:function(e){this._autoPlayIsRunning=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currdeg",{get:function(){return this._currdeg},set:function(e){this._currdeg=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalItems",{get:function(){return this._totalItems},set:function(e){this._totalItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHorizontal",{get:function(){return this._isHorizontal},set:function(e){this._isHorizontal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidthSize",{get:function(){return this._maxWidthSize},set:function(e){this._maxWidthSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHeigthSize",{get:function(){return this._maxHeigthSize},set:function(e){this._maxHeigthSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDegree",{get:function(){return this._maxDegree},set:function(e){this._maxDegree=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalWidth",{get:function(){return this._totalWidth},set:function(e){this._totalWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"degreesSlides",{get:function(){return this._degreesSlides},set:function(e){this._degreesSlides=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(e){this._activeIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lockSlides",{get:function(){return this._lockSlides},set:function(e){this._lockSlides=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastIndex",{get:function(){return this._lastIndex},set:function(e){this._lastIndex=e},enumerable:!0,configurable:!0}),e}(),s=function(){function e(e){this.componentElement=e,this.itemsCarouselRendered=0,this.morePairSlides=1,this.angle=45,this.ratioScale=1,this.margin=20,this.perspective=2e3,this.endInSlide=!0,this.timeToSlide=300,this.lockSlides=!1,this.initialSlide=0,this.loop=!1,this.axis="horizontal",this.autoPlay=!1,this.delayAutoPlay=3e3,this.onInitCarousel=new t.EventEmitter,this.onReadyCarousel=new t.EventEmitter,this.onChangePropertiesCarousel=new t.EventEmitter,this.onSlideChange=new t.EventEmitter,this.onSlideCentered=new t.EventEmitter,this.onTransitionStart=new t.EventEmitter,this.onTransitionEnd=new t.EventEmitter,this.onSlideNextTransitionStart=new t.EventEmitter,this.onSlideNextTransitionEnd=new t.EventEmitter,this.onSlidePrevTransitionStart=new t.EventEmitter,this.onSlidePrevTransitionEnd=new t.EventEmitter,this.onSlideMove=new t.EventEmitter,this.onSlideMoveEnd=new t.EventEmitter,this.onSlideMoveStart=new t.EventEmitter,this.onTouchMove=new t.EventEmitter,this.onTouchStart=new t.EventEmitter,this.onTouchEnd=new t.EventEmitter,this.onReachBeginning=new t.EventEmitter,this.onReachEnd=new t.EventEmitter,this.carousel=new o}return e.prototype.onDomChange=function(e){e.addedNodes.length>0&&(0===this.itemsCarouselRendered?this.reInit():(this.update(),this.updateCssShowSlides()),this.itemsCarouselRendered=this.carouselElm.nativeElement.getElementsByClassName("item-carousel").length)},e.prototype.ngOnInit=function(){this.onInitCarousel.emit(this.carousel),this.itemsCarouselRendered=this.carouselElm.nativeElement.getElementsByClassName("item-carousel").length},e.prototype.ngOnChanges=function(e){for(var t=0;t<Object.keys(e).length;t++)e[Object.keys(e)[t]].currentValue==e[Object.keys(e)[t]].previousValue||e[Object.keys(e)[t]].isFirstChange()||(this.update(),this.onChangePropertiesCarousel.emit(e))},e.prototype.ngAfterViewInit=function(){this.initEventsPan(),this.configPlugin(),setTimeout(function(){this.componentElement.nativeElement.className+=" ready"}.bind(this)),this.onReadyCarousel.emit(this.carousel)},e.prototype.lockCarousel=function(e){this.carousel.lockSlides=e},e.prototype.slideNext=function(){if(this.checkLimitsCarrousel(this.carousel.activeIndex+1)){this.moveSlideTo(this.carousel.activeIndex+1);var e=this;setTimeout(function(){return e.detectCurrentSlide()})}},e.prototype.slidePrev=function(){if(this.checkLimitsCarrousel(this.carousel.activeIndex-1)){this.moveSlideTo(this.carousel.activeIndex-1);var e=this;setTimeout(function(){return e.detectCurrentSlide()})}},e.prototype.slideTo=function(e){if(this.checkLimitsCarrousel(e)){this.moveSlideTo(e);var t=this;setTimeout(function(){return t.detectCurrentSlide()})}},e.prototype.autoPlayStart=function(){this.autoPlay=!0,this.autoPlaySlide()},e.prototype.autoPlayStop=function(){clearInterval(this.autoPlayTimeout),this.carousel.autoPlayIsRunning=!1},e.prototype.toggleMode=function(){this.axis="vertical"==this.axis?"horizontal":"vertical",this.update()},e.prototype.reInit=function(){this.carousel=new o,this.configPlugin()},e.prototype.update=function(){this.setPerspectiveContainer(),this.checkRotation(),this.carousel.items=Array.from(this.carouselElm.nativeElement.getElementsByClassName("item-carousel")),this.carousel.totalItems=this.carousel.items.length,this.getmaxSizes(),this.carousel.lockSlides=this.lockSlides,this.setDegreesOnSlides(),this.setTransformCarrousel(-this.carousel.degreesSlides[this.carousel.activeIndex])},e.prototype.configPlugin=function(){this.update(),this.manageEvents(),this.initSlidesOn(),this.updateCssShowSlides(),this.autoPlaySlide()},e.prototype.initEventsPan=function(){var e=new i(this.carouselElm.nativeElement);e.on("pan",this.rotate.bind(this)),e.get("pan").set({direction:i.DIRECTION_ALL,threshold:0})},e.prototype.rotate=function(e){if(!this.carousel.lockSlides){var t=this.carousel.isHorizontal?e.velocityX:-e.velocityY;this.setNewDeg(this.carousel.currdeg+t*window.devicePixelRatio),this.moveCarrousel(this.carousel.currdeg),e.isFinal&&this.endInSlide&&this.moveSlideTo(this.carousel.activeIndex)}},e.prototype.autoPlaySlide=function(){this.autoPlay&&(this.autoPlayTimeout=setTimeout(function(){this.carousel.autoPlayIsRunning=!0,this.slideNext(),this.autoPlaySlide()}.bind(this),this.delayAutoPlay))},e.prototype.initSlidesOn=function(){this.initialSlide>=0&&this.initialSlide<this.carousel.items.length?this.carousel.activeIndex=parseInt(this.initialSlide.toString()):this.initialSlide>=this.carousel.items.length?(this.carousel.activeIndex=this.carousel.items.length-1,this.initialSlide=this.carousel.activeIndex):(this.carousel.activeIndex=0,this.initialSlide=this.carousel.activeIndex);var e=this.carousel.activeIndex*this.angle;this.setNewDeg(-e),this.setTransformCarrousel(-e)},e.prototype.setNewDeg=function(e){this.carousel.currdeg=e,this.carousel.currdeg>0&&(this.carousel.currdeg=0),this.carousel.currdeg<-this.carousel.maxDegree&&(this.carousel.currdeg=-this.carousel.maxDegree)},e.prototype.checkRotation=function(){this.carousel.isHorizontal="vertical"!==this.axis,this.rotationFn=this.carousel.isHorizontal?"rotateY":"rotateX"},e.prototype.checkLimitsCarrousel=function(e){return this.carousel.activeIndex!=e&&e>=0&&e<this.carousel.totalItems},e.prototype.moveSlideTo=function(e){this.setNewDeg(-this.carousel.degreesSlides[e]),this.moveCarrousel(this.carousel.currdeg,this.timeToSlide)},e.prototype.moveCarrousel=function(e,t){void 0===t&&(t=0),this.carouselElm.nativeElement.style.transition="transform "+t+"ms",this.carouselElm.nativeElement.style.webkitTransition="transform "+t+"ms",this.setTransformCarrousel(e),this.detectCurrentSlide()},e.prototype.setTransformCarrousel=function(e){this.carouselElm.nativeElement.style.transform="translateZ("+-this.radius+"px) "+this.rotationFn+"("+e+"deg)",this.carouselElm.nativeElement.style.webkitTransform="translateZ("+-this.radius+"px) "+this.rotationFn+"("+e+"deg)",this.sendSlideIsCentered()},e.prototype.sendSlideIsCentered=function(){this.carousel.currdeg==-this.carousel.degreesSlides[this.carousel.activeIndex]&&this.onSlideCentered.emit(this.carousel)},e.prototype.setPerspectiveContainer=function(){this.containerElm.nativeElement.style.perspective=this.perspective,this.containerElm.nativeElement.style.webkitPerspective=this.perspective,this.containerElm.nativeElement.style.MozPerspective=this.perspective},e.prototype.getmaxSizes=function(){var e=this;this.carousel.items.map(function(t){var i=t.offsetWidth,n=t.offsetHeight;e.carousel.maxWidthSize=0,e.carousel.maxHeigthSize=0,i>e.carousel.maxWidthSize&&(e.carousel.maxWidthSize=i,e.carousel.totalWidth=e.carousel.items.length*e.carousel.maxWidthSize),n>e.carousel.maxHeigthSize&&(e.carousel.maxHeigthSize=n,e.carousel.totalWidth=e.carousel.items.length*e.carousel.maxHeigthSize)}),this.setContainerWithMaxSize()},e.prototype.setContainerWithMaxSize=function(){this.containerElm.nativeElement.style.width=this.carousel.maxWidthSize+"px",this.containerElm.nativeElement.style.height=this.carousel.maxHeigthSize+"px"},e.prototype.setDegreesOnSlides=function(){var e=this,t=0,i=this.carousel.isHorizontal?this.carousel.maxWidthSize:this.carousel.maxHeigthSize;this.radius=Math.round(i/2/Math.tan(Math.PI/(360/this.angle)))+this.margin,this.carousel.degreesSlides=[],this.carousel.items.map(function(i,n){i.style.transform=e.rotationFn+"("+t+"deg) translateZ("+e.radius+"px)",i.style.webkitTransform=e.rotationFn+"("+t+"deg) translateZ("+e.radius+"px)",e.carousel.degreesSlides.push(t),e.carousel.maxDegree=t,t+=e.angle})},e.prototype.detectCurrentSlide=function(){var e=this,t=99e9,i=0;this.carousel.degreesSlides.forEach(function(n,o){var s=Math.abs(n-Math.abs(e.carousel.currdeg));s<t&&(t=s,i=o)}),this.carousel.activeIndex!=i&&(this.carousel.lastIndex=this.carousel.activeIndex,this.carousel.activeIndex=i,this.updateCssShowSlides(),this.onSlideChange.emit(this.carousel),0==this.carousel.activeIndex?this.onReachBeginning.emit(this.carousel):this.carousel.activeIndex==this.carousel.totalItems-1&&this.onReachEnd.emit(this.carousel))},e.prototype.updateCssShowSlides=function(){var e=this,t=e.carousel.activeIndex,i=this.carousel.items[t];e.removeClassShowSlides("actual"),e.removeClassShowSlides("prev"),e.removeClassShowSlides("next"),i&&(i.className+=" actual");for(var n=0;n<this.morePairSlides;n++){var o=e.carousel.items[t-(n+1)],s=e.carousel.items[t+(n+1)];o&&(o.className+=" prev"),s&&(s.className+=" next")}},e.prototype.removeClassShowSlides=function(e){this.carouselElm.nativeElement.getElementsByClassName(e).length>0&&Array.from(this.carouselElm.nativeElement.getElementsByClassName(e)).map(function(t){t.classList.remove(e)})},e.prototype.manageEvents=function(){var e=this,t={preventDefault:!0},n=this,o=new i(this.carouselElm.nativeElement,t);o.on("panstart",function(e){n.onSlideMoveStart.emit({carousel:n.carousel,event:e})}),o.on("panend",function(e){n.onSlideMoveEnd.emit({carousel:n.carousel,event:e})}),o.on("pan",function(e){n.onSlideMove.emit({carousel:n.carousel,event:e})}),this.carouselElm.nativeElement.addEventListener("touchstart",function(e){n.onTouchStart.emit({carousel:n.carousel,event:e})}),this.carouselElm.nativeElement.addEventListener("touchmove",function(e){n.onTouchMove.emit({carousel:n.carousel,event:e})}),this.carouselElm.nativeElement.addEventListener("touchend",function(e){n.onTouchEnd.emit({carousel:n.carousel,event:e})}),this.carouselElm.nativeElement.addEventListener("transitionend",function(t){var i={carousel:n.carousel,event:t};"transform"===t.propertyName&&(e.onTransitionEnd.emit(i),n.carousel.lastIndex>n.carousel.activeIndex?e.onSlideNextTransitionEnd.emit(i):e.onSlidePrevTransitionEnd.emit(i))}),this.carouselElm.nativeElement.addEventListener("transitionstart",function(t){var o={carousel:n.carousel,event:t};"transform"===t.propertyName&&(e.onTransitionStart.emit(o),t.direction===i.DIRECTION_LEFT?n.onSlideNextTransitionStart.emit(o):t.direction===i.DIRECTION_RIGHT&&n.onSlidePrevTransitionStart.emit(o))}),window.addEventListener("resize",function(){this.update()}.bind(this))},e.decorators=[{type:t.Component,args:[{selector:"carousel-component",styles:["\n        :host{\n            display: flex;\n        }\n        :host .container {\n            margin: 0 auto;\n            width: 600px;\n            height: 400px;\n            position: relative;\n        }\n\n\n        :host .container .carousel {\n            height: 100%;\n            width: 100%;\n            position: absolute;\n            -webkit-transform-style: preserve-3d;\n            -moz-transform-style: preserve-3d;\n            -o-transform-style: preserve-3d;\n            transform-style: preserve-3d;\n \n        }\n        :host.ready .carousel {\n            -webkit-transition: -webkit-transform 300ms;\n            -moz-transition:-moz-transform 300ms;\n            -o-transition: -o-transform 300ms;\n            transition: transform 300ms;\n        }\n        :host .container .carousel ::content >>> .item-carousel {\n            display: block;\n            position: absolute;\n            border:1px solid black;\n            width: 100%;\n            height: 100%;\n            text-align: center;\n            transform-style: preserve-3d;\n            opacity: 0;\n        }\n        :host.ready .carousel ::content >>> .item-carousel {\n            -webkit-transition: opacity 300ms, -webkit-transform 300ms;\n            -moz-transition: opacity 300ms, -moz-transform 300ms;\n            -o-transition: opacity 300ms, -o-transform 300ms;\n            transition: opacity 300ms, transform 300ms;\n        }\n        \n        :host .container .carousel ::content >>> .item-carousel img{\n            user-drag: none;\n            user-select: none;\n            -moz-user-select: none;\n            -webkit-user-drag: none;\n            -webkit-user-select: none;\n            -ms-user-select: none;\n        }\n        \n        :host .container .carousel ::content >>> .item-carousel.next,\n        :host .container .carousel ::content >>> .item-carousel.prev,\n        :host .container .carousel ::content >>> .item-carousel.actual{\n            opacity: 0.95;\n        }\n\n\n    "],template:'<div class="container" #container>\n  <div class="carousel" #carousel  (domChange)="onDomChange($event)">\n    <ng-content  select=".item-carousel"></ng-content>\n  </div>\n</div>'}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={morePairSlides:[{type:t.Input,args:["morePairSlides"]}],angle:[{type:t.Input,args:["angle"]}],ratioScale:[{type:t.Input,args:["ratioScale"]}],margin:[{type:t.Input,args:["margin"]}],perspective:[{type:t.Input,args:["perspective"]}],endInSlide:[{type:t.Input,args:["endInSlide"]}],timeToSlide:[{type:t.Input,args:["timeToSlide"]}],lockSlides:[{type:t.Input,args:["lockSlides"]}],initialSlide:[{type:t.Input,args:["initialSlide"]}],loop:[{type:t.Input,args:["loop"]}],axis:[{type:t.Input,args:["mode"]}],autoPlay:[{type:t.Input,args:["autoPlay"]}],delayAutoPlay:[{type:t.Input,args:["delayAutoPlay"]}],onInitCarousel:[{type:t.Output,args:["onInit"]}],onReadyCarousel:[{type:t.Output,args:["onReady"]}],onChangePropertiesCarousel:[{type:t.Output,args:["onChangeProperties"]}],onSlideChange:[{type:t.Output,args:["onSlideChange"]}],onSlideCentered:[{type:t.Output,args:["onSlideCentered"]}],onTransitionStart:[{type:t.Output,args:["onTransitionStart"]}],onTransitionEnd:[{type:t.Output,args:["onTransitionEnd"]}],onSlideNextTransitionStart:[{type:t.Output,args:["onSlideNextTransitionStart"]}],onSlideNextTransitionEnd:[{type:t.Output,args:["onSlideNextTransitionEnd"]}],onSlidePrevTransitionStart:[{type:t.Output,args:["onSlidePrevTransitionStart"]}],onSlidePrevTransitionEnd:[{type:t.Output,args:["onSlidePrevTransitionEnd"]}],onSlideMove:[{type:t.Output,args:["onSlideMove"]}],onSlideMoveEnd:[{type:t.Output,args:["onSlideMoveEnd"]}],onSlideMoveStart:[{type:t.Output,args:["onSlideMoveStart"]}],onTouchMove:[{type:t.Output,args:["onTouchMove"]}],onTouchStart:[{type:t.Output,args:["onTouchStart"]}],onTouchEnd:[{type:t.Output,args:["onTouchEnd"]}],onReachBeginning:[{type:t.Output,args:["onReachBeginning"]}],onReachEnd:[{type:t.Output,args:["onReachEnd"]}],carouselElm:[{type:t.ViewChild,args:["carousel"]}],containerElm:[{type:t.ViewChild,args:["container"]}]},e}(),r=function(){function e(e){var i=this;this.elementRef=e,this.domChange=new t.EventEmitter;var n=this.elementRef.nativeElement;this.changes=new MutationObserver(function(e){e.forEach(function(e){return i.domChange.emit(e)})}),this.changes.observe(n,{attributes:!0,childList:!0,characterData:!0})}return e.prototype.ngOnDestroy=function(){this.changes.disconnect()},e.decorators=[{type:t.Directive,args:[{selector:"[domChange]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={domChange:[{type:t.Output}]},e}(),a=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.overrides={pan:{direction:i.DIRECTION_ALL}},t}return a(t,e),t}(n.HammerGestureConfig),u=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[r,s],providers:[{provide:n.HAMMER_GESTURE_CONFIG,useClass:l}],exports:[s],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]}]}],e.ctorParameters=function(){return[]},e}();e.CarouselModule=u,e.CarouselComponent=s,Object.defineProperty(e,"__esModule",{value:!0})});